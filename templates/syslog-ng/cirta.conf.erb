#
# /etc/syslog_ng/conf.d/cirta.conf
#
# Generated by Chef for <%= node[:fqdn] %>
#

<% if node[:chef_cirta][:syslog_ng][:enabled] %>
source s_net_cirta { tcp(ip(<%= node[:chef_cirta][:syslog_ng][:listen_ip] %>) port(<%= node[:chef_cirta][:syslog_ng][:port] %>) so_rcvbuf(67108864) );
                     udp(ip(<%= node[:chef_cirta][:syslog_ng][:listen_ip] %>) port(<%= node[:chef_cirta][:syslog_ng][:port] %>) so_rcvbuf(67108864) ); };


destination d_cirta { file("/var/log/cirta/cirta.log"); owner("root"); group("<%= node[:chef_cirta][:cirta_group] %>"); perms("640"); };

log { source(s_net_cirta);
      destination(d_cirta);
      flags(final); };
<% else %>
# source s_net_cirta { tcp(ip(<%= node[:chef_cirta][:syslog_ng][:listen_ip] %>) port(<%= node[:chef_cirta][:syslog_ng][:port] %>) so_rcvbuf(67108864) );
#                     udp(ip(<%= node[:chef_cirta][:syslog_ng][:listen_ip] %>) port(<%= node[:chef_cirta][:syslog_ng][:port] %>) so_rcvbuf(67108864) ); };
#
#
# destination d_cirta { file("<%= node[:chef_cirta][:syslog_ng][:path] %>"); owner("root"); group("<%= node[:chef_cirta][:cirta_group] %>"); perms("640"); };
# 
# log { source(s_net_cirta);
#      destination(d_cirta);
#      flags(final); };
<% end %>
